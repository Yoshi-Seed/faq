<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Japan Medical Research FAQ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        summary::-webkit-details-marker { display: none; }
        details[open] summary { color: #2563eb; font-weight: bold; }
        details {
            border-radius: 1.25rem;
            background: #fff;
            box-shadow: 0 2px 16px 0 rgba(0,0,0,0.05);
            margin-bottom: 1.5rem;
            border: 1px solid #e5e7eb;
        }
        summary {
            padding: 1.25rem 2rem 1.25rem 2.5rem;
            font-size: 1.15rem;
            cursor: pointer;
            outline: none;
            transition: color 0.2s;
            position: relative;
        }
        summary::before {
            content: '+';
            position: absolute;
            left: 1.2rem;
            top: 1.3rem;
            font-weight: bold;
            color: #2563eb;
            font-size: 1.4rem;
            transition: 0.2s;
        }
        details[open] summary::before {
            content: '-';
            color: #7c3aed;
        }
        .faq-answer { padding: 0 2.5rem 1.2rem 2.5rem; font-size: 1.05rem; color: #444; }
        @media (max-width: 640px) {
            summary, .faq-answer { padding-left: 1rem; padding-right: 1rem; }
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen flex flex-col items-center">
    <div class="w-full max-w-2xl mx-auto mt-8 mb-16">
        <header class="mb-8 text-center">
            <h1 class="text-3xl sm:text-4xl font-bold text-blue-800 mb-2">Japan Medical Research FAQ</h1>
            <p class="text-base text-gray-600 mb-6">日本の医療リサーチよくある質問（サンプル by ウェインツ君）</p>
            <!-- 検索ボックス -->
            <div class="flex justify-center mb-4">
                <input id="search-input" type="text" placeholder="キーワード検索（英語/日本語）..." class="w-full max-w-md px-4 py-2 rounded-xl border border-gray-300 focus:ring-2 focus:ring-blue-400 focus:outline-none shadow" />
            </div>
            <!-- 検索結果 -->
            <div id="search-results" class="mt-2"></div>
        </header>
        <section id="faq-list">
            <!-- FAQアコーディオンがここに入る -->
        </section>
        <footer class="mt-12 text-center text-gray-400 text-sm">Sample created by ウェインツ君 &copy; 2025</footer>
    </div>
    <script>
    // Q&Aデータ（サンプル10問）
    const faqData = [
      {
        q: "Q1. Is every citizen in Japan covered by health insurance?",
        a: "Yes, Japan has implemented a universal health insurance system since 1961, ensuring that all citizens are enrolled in some form of public health insurance. The system comprises various schemes, including: Employees‘ Health Insurance (company employees), National Health Insurance (self-employed, pensioners, etc.), and Medical Care System for the Elderly Aged 75 and Over."
      },
      {
        q: "Q2. What percentage of medical expenses do patients typically pay out of pocket in Japan?",
        a: "Public health insurance covers about 70% of costs, patients usually pay the remaining 30%. For children and the elderly, the co-payment rate can be 10–30%. Reimbursement rates are set by the Central Social Insurance Medical Council (Chuikyo)."
      },
      {
        q: "Q3. Is there an upper limit to out-of-pocket payments for medical expenses in Japan?",
        a: "Yes, the High-Cost Medical Expense Benefit system sets a monthly cap (based on income) on out-of-pocket payments. Anything above this is reimbursed, reducing financial barriers for serious illnesses."
      },
      {
        q: "Q4. Does the design of the healthcare payment system influence behaviors in clinical practice?",
        a: "Yes, additional reimbursement points (like for home healthcare) or limits on inpatient days can influence practice styles and inter-institutional cooperation. Whether a service is reimbursed often drives physician behavior."
      },
      {
        q: "Q5. Is access to healthcare providers in Japan open and flexible?",
        a: "Yes. Patients can visit specialists or large hospitals freely without a referral. This “free access system” is a unique aspect of Japanese healthcare."
      },
      {
        q: "Q6. Does Japan have a primary care physician system?",
        a: "There is no exact US-style GP/PCP system in Japan. Initial consultations are usually handled by specialists in each department, and patients can go to university or large hospitals directly."
      },
      {
        q: "Q7. Are Japan’s health insurance systems operated by private companies?",
        a: "No, the health insurance system is operated by public entities (government, municipalities), not private insurers."
      },
      {
        q: "Q8. What types of medical institutions exist in Japan?",
        a: "Hospitals (20+ beds, about 70%) and clinics (“shinryojo”, fewer than 20 beds, about 30%). Clinics are often private and neighborhood-based, focusing on primary/routine care."
      },
      {
        q: "Q9. What is the number of hospital beds and the availability of medical equipment (such as MRI machines) in Japan?",
        a: "Japan has one of the highest number of hospital beds per capita in the world, over 4x the US. MRI machine prevalence is also among the world’s highest."
      },
      {
        q: "Q10. Are consultation times for doctors in Japan short? If so, why?",
        a: "Yes, typically just 3–5 minutes per patient. Fee-for-service reimbursement encourages short, high-volume consultations, so survey designs must deliver the core message efficiently."
      }
    ];

    // アコーディオン生成
    function renderFAQ(list = faqData) {
        const faqList = document.getElementById('faq-list');
        faqList.innerHTML = "";
        list.forEach((item, idx) => {
            const details = document.createElement('details');
            details.className = "faq-item";
            details.dataset.idx = idx;
            const summary = document.createElement('summary');
            summary.textContent = item.q;
            const answer = document.createElement('div');
            answer.className = "faq-answer";
            answer.textContent = item.a;
            details.appendChild(summary);
            details.appendChild(answer);
            faqList.appendChild(details);
        });
    }

    // 初期表示
    renderFAQ();

    // 検索ロジック
    const searchInput = document.getElementById('search-input');
    const searchResults = document.getElementById('search-results');
    const faqList = document.getElementById('faq-list');
    let faqItems;

    function highlight(text, keyword) {
        if (!keyword) return text;
        return text.replace(new RegExp(`(${keyword})`, "gi"), `<mark>$1</mark>`);
    }

    searchInput.addEventListener('input', function() {
        const keyword = this.value.trim().toLowerCase();
        searchResults.innerHTML = "";
        if (!keyword) {
            renderFAQ(); // 全FAQ表示
            return;
        }
        // Q&Aから部分一致検索
        const filtered = faqData
            .map((item, idx) => ({...item, idx}))
            .filter(item =>
                item.q.toLowerCase().includes(keyword) ||
                item.a.toLowerCase().includes(keyword)
            );
        if (filtered.length === 0) {
            searchResults.innerHTML = "<div class='text-red-400 font-bold mt-3'>No results found</div>";
            faqList.innerHTML = "";
            return;
        }
        // 検索結果リストを表示
        const ul = document.createElement('ul');
        ul.className = "text-left";
        filtered.forEach(res => {
            const li = document.createElement('li');
            li.className = "mb-2";
            li.innerHTML = `<a href="#" class="text-blue-600 hover:underline font-semibold" data-idx="${res.idx}">${highlight(res.q, keyword)}</a>
                <div class="text-gray-600 text-sm truncate">${highlight(res.a, keyword)}</div>`;
            ul.appendChild(li);
        });
        searchResults.appendChild(ul);
        faqList.innerHTML = ""; // FAQアコーディオン一時非表示
    });

    // 検索結果クリック→該当アコーディオンを開く
    searchResults.addEventListener('click', function(e) {
        if (e.target.tagName.toLowerCase() === 'a' && e.target.dataset.idx) {
            e.preventDefault();
            const idx = Number(e.target.dataset.idx);
            renderFAQ(faqData); // 全FAQを再表示
            setTimeout(() => {
                // 指定アコーディオンを開いてジャンプ
                const allDetails = document.querySelectorAll('.faq-item');
                if (allDetails[idx]) {
                    allDetails[idx].open = true;
                    allDetails[idx].scrollIntoView({behavior: 'smooth', block: 'start'});
                }
            }, 10);
            searchResults.innerHTML = ""; // 検索リセット
            searchInput.value = "";
        }
    });
    </script>
<!-- 以下、body内の最後に追加 -->
<!-- フローティングボタン -->
<div id="floating-btns" style="position:fixed;right:2vw;bottom:3vh;z-index:50;display:flex;flex-direction:column;gap:1rem;">
  <button onclick="scrollToTop()" title="Topへ" class="rounded-full shadow-lg bg-blue-700 hover:bg-blue-900 text-white p-3 transition duration-200 focus:outline-none">
    ▲<span class="hidden sm:inline">&nbsp;Top</span>
  </button>
  <button onclick="focusSearch()" title="検索に戻る" class="rounded-full shadow-lg bg-purple-600 hover:bg-purple-800 text-white p-3 transition duration-200 focus:outline-none">
    🔍<span class="hidden sm:inline">&nbsp;Search</span>
  </button>
</div>

<script>
  // Topへ戻る
  function scrollToTop() {
      window.scrollTo({top: 0, behavior: 'smooth'});
  }
  // 検索ボックスにフォーカス
  function focusSearch() {
      scrollToTop();
      setTimeout(() => {
          document.getElementById('search-input').focus();
      }, 400);
  }
  // スクロールでボタンを目立たせる
  window.addEventListener('scroll', () => {
    const btns = document.getElementById('floating-btns');
    if(window.scrollY > 120){
      btns.style.opacity = '1';
      btns.style.pointerEvents = 'all';
    }else{
      btns.style.opacity = '0.5';
      btns.style.pointerEvents = 'none';
    }
  });
</script>

</body>
</html>
